# 시스템 설계 개요

WriterOS는 글쓰기에 최적화된 경량 리눅스 배포판입니다.

## 기본 철학

1. **집중력 극대화**: 방해 요소 없는 글쓰기 환경
2. **즉시 사용**: 빠른 부팅과 퀵리줌
3. **배터리 우선**: 장시간 사용 가능한 절전 설계
4. **AI 협업**: 글쓰기를 돕는 지능형 어시스턴트

## 멀티 아키텍처 지원

WriterOS는 다음 아키텍처를 지원합니다:

- **AMD64**: 고성능 x86_64 프로세서 (ASUS 제피로스 G14)
- **ARM64**: 저전력 ARM 프로세서 (Surface Pro X)

## 아키텍처 개요

```
┌─────────────────────────────────────────┐
│           WriterOS 사용자 환경           │
├─────────────────────────────────────────┤
│ 글쓰기 앱 │ AI 어시스턴트 │ 시스템 도구 │
├─────────────────────────────────────────┤
│         최소 데스크톱 환경 (Sway)        │
├─────────────────────────────────────────┤
│         전력 관리 계층                   │
├─────────────────────────────────────────┤
│         최적화된 Linux 커널              │
├─────────────────────────────────────────┤
│      하드웨어 추상화 계층 (멀티 아키텍처) │
└─────────────────────────────────────────┘
```

## 핵심 구성요소

### 1. 기본 시스템 (Debian Stable 기반)

#### 배포판 선택 결정: Debian Stable ⭐

**선택 이유**:
- **검증된 suspend/resume**: 광범위한 하드웨어에서 안정적 동작
- **뛰어난 호환성**: 제피로스 G14, Surface Pro X 모두 지원
- **완벽한 한글 지원**: 즉시 사용 가능한 fcitx5, 폰트
- **안정성**: 글쓰기 작업 중 시스템 크래시 위험 최소
- **멀티 아키텍처**: AMD64/ARM64 공식 지원

#### 시스템 구성
- **Base**: Debian 12 "Bookworm" (Stable)
- **Init**: systemd (전력 관리 최적화)
- **Display Server**: Wayland (저전력, 현대적)
- **Window Manager**: Sway (타일링, 키보드 중심)

### 2. 글쓰기 환경 (OS의 핵심 인터페이스)

WriterOS에서 에디터는 단순한 애플리케이션이 아닌 **운영체제의 메인 인터페이스**입니다.

#### 에디터 아키텍처 전략

**Phase 1: Neovim 기반 커스텀 에디터** ⭐
- **핵심 에디터**: Neovim + WriterOS 전용 플러그인
- **장점**: 경량성, 확장성, 멀티 아키텍처 지원
- **커스터마이징**: Lua 스크립팅으로 글쓰기 특화

**Phase 2: WriterOS Shell (하이브리드)**
```
┌─────────────────────────────────────────┐
│           WriterOS Shell                │
├─────────────────────────────────────────┤
│ [새 글] [열기] [AI] [설정] [집중모드]   │
├─────────────────────────────────────────┤
│                                         │
│        Neovim 인스턴스                  │
│        (글쓰기 모드)                    │
│                                         │
├─────────────────────────────────────────┤
│ 글자수: 1,234 │ AI 제안 │ 저장됨       │
└─────────────────────────────────────────┘
```

#### 글쓰기 핵심 기능
- **집중 모드**: Zen Mode + 네트워크 차단
- **AI 통합**: 실시간 자동완성, 문법 검사, 스타일 제안
- **실시간 통계**: 글자수, 작성 시간, 목표 진행도
- **한글 최적화**: fcitx5 연동, 한글 단어 단위 이동
- **자동 저장**: 실시간 백업 + 클라우드 동기화

#### 멀티 아키텍처 최적화
- **AMD64 (제피로스 G14)**: GPU 가속 AI 추론, 고해상도 지원
- **ARM64 (Surface Pro X)**: 터치/펜 지원, 극한 절전 모드

### 3. 한글 지원 시스템
- **입력기**: fcitx5 (빠른 한글 입력, 한자 변환)
- **폰트**: Noto Sans CJK KR, 본고딕, D2Coding
- **맞춤법 검사**: hunspell-ko (한글 맞춤법 검사)
- **타이포그래피**: 한글 조판 최적화
- **자동 완성**: 한글 단어 예측 및 완성

### 4. AI 통합
- **로컬 AI**: Ollama (로컬 LLM 실행)
- **API 통합**: OpenAI, Claude, 로컬 모델
- **글쓰기 도구**: 
  - 자동 완성
  - 내용 검토
  - 아이디어 브레인스토밍
  - 언어 교정

### 5. 연결성 (최소한으로 제한)
- **클라우드 동기화**: rclone (다양한 클라우드 지원)
- **이메일**: neomutt (터미널 기반, 명령어 전용)
- **파일 전송**: scp, rsync (필요시에만)

### 6. 고급 개발자 도구 (숨김 기능)
- **웹 브라우저**: qutebrowser (터미널 명령어로만 접근)
- **개발 도구**: git, curl, wget
- **시스템 관리**: htop, neofetch, 로그 뷰어
- **네트워크**: ping, traceroute, netstat

**⚠️ 주의**: 웹브라우저는 기본 UI에서 숨겨져 있으며, 터미널에서 `qutebrowser` 명령어로만 실행 가능합니다.

## 실제 타겟 하드웨어

### 🎮 ASUS 제피로스 G14 (2021) - AMD64 고성능 최적화

**하드웨어 사양**:
- CPU: AMD Ryzen 9 5900HS / Ryzen 7 4900HS
- GPU: NVIDIA RTX 3060/3070 (Max-Q)
- RAM: 16GB/32GB DDR4-3200
- Storage: 1TB NVMe SSD
- Display: 14" 1440p 120Hz

**최적화 전략**:
- **고성능 모드**: CPU/GPU 성능 최대화
- **AI 가속**: NVIDIA GPU를 활용한 AI 추론
- **고속 스토리지**: NVMe SSD 최적화
- **고해상도**: 1440p 디스플레이 최적화

**성능 목표**:
- 부팅 시간: **8초 이내**
- 퀵리줌: **1초 이내**
- 배터리 수명: **6-8시간** (게이밍 노트북 특성상)
- 메모리 사용량: **800MB 이하**

### 📱 Surface Pro X (SQ1) - ARM64 모빌리티 최적화

**하드웨어 사양**:
- CPU: Microsoft SQ1 (Snapdragon 8cx 기반)
- GPU: Adreno 680 (통합)
- RAM: 8GB/16GB LPDDR4X
- Storage: 128GB/256GB/512GB NVMe SSD
- Display: 13" 2880x1920 터치스크린

**최적화 전략**:
- **극한 절전**: ARM64 네이티브 최적화
- **터치/펜 지원**: Surface Pen 완전 지원
- **팬리스 운영**: 열 관리 최적화
- **Always-Connected**: 글쓰기 언제든 즉시 시작

**성능 목표**:
- 부팅 시간: **10초 이내**
- 퀵리줌: **2초 이내**
- 배터리 수명: **10-12시간** (ARM64 최적화)
- 메모리 사용량: **600MB 이하**

### 🛠️ 개발 환경: ASUS PX13 (WSL2)

**개발 전용 머신**:
- **OS**: Windows 11 + WSL2 (Debian)
- **용도**: 크로스 컴파일, 이미지 빌드, 테스트
- **특징**: 실제 타겟 하드웨어 테스트 불가, 개발 전용

## 멀티 아키텍처 지원 전략

### AMD64 (x86_64) 최적화
```bash
# 고성능 최적화
- 최신 Intel/AMD 프로세서 지원
- AVX2, AVX-512 명령어 활용
- 높은 메모리 대역폭 활용
- GPU 가속 AI 추론 (NVIDIA CUDA)
```

### ARM64 (AArch64) 최적화
```bash
# 저전력 최적화
- ARM Cortex-A 프로세서 최적화
- NEON SIMD 명령어 활용
- 저전력 메모리 관리
- Neural Processing Unit 활용
```

## 하드웨어별 특화 기능

### 제피로스 G14 특화
- **GPU 가속 AI**: NVIDIA RTX를 활용한 로컬 AI 추론
- **고해상도 지원**: 1440p 디스플레이 최적화
- **게이밍 모드**: 필요시 고성능 모드 전환
- **RGB 조명 제어**: 글쓰기 집중 모드 조명

### Surface Pro X 특화
- **터치스크린 지원**: 멀티 터치 제스처
- **Surface Pen 지원**: 필기 입력 및 주석
- **Always-On 모드**: 인스턴트 온/오프
- **LTE 연결**: 항상 연결된 글쓰기 환경

## 전력 관리 아키텍처

### 공통 전력 관리
```
┌─────────────────────────────────────────┐
│           전력 관리 계층                │
├─────────────────────────────────────────┤
│ TLP │ PowerTOP │ CPU Governor │ GPU 관리 │
├─────────────────────────────────────────┤
│         하드웨어별 드라이버             │
└─────────────────────────────────────────┘
```

### 하드웨어별 전력 프로파일
- **제피로스 G14**: 성능 우선 → 절전 모드 전환
- **Surface Pro X**: 극한 절전 → 필요시 성능 부스트

## 부팅 프로세스

### 공통 부팅 프로세스
```
1. UEFI/BIOS → systemd-boot (빠른 부트로더)
2. Linux Kernel → 하드웨어 초기화
3. systemd → 핵심 서비스만 시작
4. Sway → 최소 환경 로드
5. WriterOS Shell → 사용자 환경
```

### 하드웨어별 부팅 최적화
- **제피로스 G14**: 고속 NVMe + 고성능 CPU = 8초 목표
- **Surface Pro X**: ARM64 최적화 + 절전 설계 = 10초 목표

## 개발 및 빌드 전략

### 멀티 아키텍처 빌드
```bash
# WSL2에서 크로스 컴파일
# AMD64 빌드
lb config --architectures amd64 --distribution bookworm

# ARM64 크로스 빌드
lb config --architectures arm64 --distribution bookworm
export CROSS_COMPILE=aarch64-linux-gnu-
```

### 하드웨어별 이미지 생성
- **제피로스 G14**: AMD64 Live ISO + NVIDIA 드라이버
- **Surface Pro X**: ARM64 Live ISO + 터치/펜 드라이버

## 성능 벤치마크 목표

| 항목 | 제피로스 G14 | Surface Pro X |
|------|--------------|---------------|
| 부팅 시간 | 8초 이내 | 10초 이내 |
| 퀵리줌 | 1초 이내 | 2초 이내 |
| 배터리 | 6-8시간 | 10-12시간 |
| 메모리 | 800MB 이하 | 600MB 이하 |
| AI 추론 | GPU 가속 | NPU 활용 |

## 다음 문서

- [전력 관리 최적화](../02-power-management/README.md)
- [한글 지원 시스템](../03-korean-support/README.md)
- [멀티 아키텍처 빌드 가이드](multiarch-build.md)
- [하드웨어별 최적화 가이드](hardware-optimization.md) 